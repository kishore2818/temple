import React, { useState } from 'react';
import { MessageSquare, Star, Send, CheckCircle, ThumbsUp, Heart } from 'lucide-react';
import type { Language } from '../App';

interface FeedbackSectionProps {
  language: Language;
}

const FeedbackSection: React.FC<FeedbackSectionProps> = ({ language }) => {
  const [rating, setRating] = useState<number>(0);
  const [feedbackText, setFeedbackText] = useState('');
  const [category, setCategory] = useState('general');
  const [isSubmitted, setIsSubmitted] = useState(false);
  const [contactInfo, setContactInfo] = useState({
    name: '',
    phone: '',
    email: ''
  });

  const categories = [
    { id: 'general', name: 'General Experience', nameHi: '‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Ö‡§®‡•Å‡§≠‡§µ' },
    { id: 'services', name: 'Temple Services', nameHi: '‡§Æ‡§Ç‡§¶‡§ø‡§∞ ‡§∏‡•á‡§µ‡§æ‡§è‡§Ç' },
    { id: 'cleanliness', name: 'Cleanliness', nameHi: '‡§∏‡•ç‡§µ‡§ö‡•ç‡§õ‡§§‡§æ' },
    { id: 'staff', name: 'Staff Behavior', nameHi: '‡§ï‡§∞‡•ç‡§Æ‡§ö‡§æ‡§∞‡•Ä ‡§µ‡•ç‡§Ø‡§µ‡§π‡§æ‡§∞' },
    { id: 'facilities', name: 'Facilities', nameHi: '‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ‡§è‡§Ç' },
    { id: 'accessibility', name: 'Accessibility', nameHi: '‡§∏‡•Å‡§ó‡§Æ‡•ç‡§Ø‡§§‡§æ' }
  ];

  const ratingEmojis = ['üòû', 'üòê', 'üôÇ', 'üòä', 'üòç'];
  const ratingLabels = {
    1: { en: 'Very Poor', hi: '‡§¨‡§π‡•Å‡§§ ‡§ñ‡§∞‡§æ‡§¨' },
    2: { en: 'Poor', hi: '‡§ñ‡§∞‡§æ‡§¨' },
    3: { en: 'Average', hi: '‡§†‡•Ä‡§ï' },
    4: { en: 'Good', hi: '‡§Ö‡§ö‡•ç‡§õ‡§æ' },
    5: { en: 'Excellent', hi: '‡§â‡§§‡•ç‡§ï‡•É‡§∑‡•ç‡§ü' }
  };

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault();
    if (rating > 0) {
      setIsSubmitted(true);
    }
  };

  const getCategoryName = (cat: any) => {
    return language.code === 'hi' ? cat.nameHi : cat.name;
  };

  const getRatingLabel = (score: number) => {
    const labels = ratingLabels[score as keyof typeof ratingLabels];
    return labels ? (language.code === 'hi' ? labels.hi : labels.en) : '';
  };

  if (isSubmitted) {
    return (
      <div className="min-h-screen flex items-center justify-center p-8">
        <div className="max-w-md w-full bg-white rounded-2xl shadow-2xl p-8 text-center">
          <div className="mb-6">
            <CheckCircle size={80} className="text-green-500 mx-auto mb-4 animate-pulse" />
            <h2 className="text-3xl font-bold text-green-700 mb-2">
              {language.code === 'hi' ? '‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶!' : 'Thank You!'}
            </h2>
            <div className="w-16 h-1 bg-green-500 mx-auto mb-4"></div>
            <p className="text-gray-600">
              {language.code === 'hi' 
                ? '‡§Ü‡§™‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§π‡§Æ‡§æ‡§∞‡•á ‡§≤‡§ø‡§è ‡§¨‡§π‡•Å‡§§ ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§π‡•à‡•§'
                : 'Your feedback is very valuable to us.'
              }
            </p>
          </div>

          <div className="bg-yellow-50 rounded-lg p-6 mb-6 border-2 border-yellow-200">
            <h3 className="font-bold text-lg text-yellow-800 mb-4">
              {language.code === 'hi' ? '‡§Ü‡§™‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ' : 'Your Feedback'}
            </h3>
            <div className="text-left space-y-2">
              <div className="flex items-center justify-between">
                <span className="text-yellow-700">
                  {language.code === 'hi' ? '‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó:' : 'Rating:'}
                </span>
                <div className="flex items-center space-x-1">
                  {Array.from({ length: rating }).map((_, i) => (
                    <Star key={i} size={16} className="fill-yellow-500 text-yellow-500" />
                  ))}
                  <span className="ml-2 text-yellow-700 font-medium">
                    {getRatingLabel(rating)}
                  </span>
                </div>
              </div>
              <div className="flex justify-between">
                <span className="text-yellow-700">
                  {language.code === 'hi' ? '‡§∂‡•ç‡§∞‡•á‡§£‡•Ä:' : 'Category:'}
                </span>
                <span className="text-yellow-700 font-medium">
                  {getCategoryName(categories.find(c => c.id === category))}
                </span>
              </div>
              <div className="text-yellow-700">
                <strong>{language.code === 'hi' ? '‡§´‡•Ä‡§°‡§¨‡•à‡§ï ID:' : 'Feedback ID:'}</strong> FB-{new Date().getFullYear()}-{Math.floor(Math.random() * 10000)}
              </div>
            </div>
          </div>

          <div className="space-y-4">
            <div className="flex items-center justify-center space-x-8 text-4xl">
              <div className="text-center">
                <Heart className="mx-auto text-red-500 mb-2" size={32} />
                <p className="text-sm text-gray-600">
                  {language.code === 'hi' ? '‡§Ü‡§™‡§ï‡§æ ‡§™‡•ç‡§∞‡•á‡§Æ' : 'Your Love'}
                </p>
              </div>
              <div className="text-center">
                <ThumbsUp className="mx-auto text-blue-500 mb-2" size={32} />
                <p className="text-sm text-gray-600">
                  {language.code === 'hi' ? '‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§™‡•ç‡§∞‡•á‡§∞‡§£‡§æ' : 'Our Motivation'}
                </p>
              </div>
            </div>

            <p className="text-sm text-gray-600">
              {language.code === 'hi' 
                ? '‡§Ü‡§™‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§∏‡•á ‡§π‡§Æ ‡§Ö‡§™‡§®‡•Ä ‡§∏‡•á‡§µ‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§î‡§∞ ‡§¨‡•á‡§π‡§§‡§∞ ‡§¨‡§®‡§æ‡§è‡§Ç‡§ó‡•á‡•§ ‡§≠‡§ó‡§µ‡§æ‡§® ‡§Ü‡§™‡§ï‡•ã ‡§∏‡•Å‡§ñ ‡§î‡§∞ ‡§∏‡§Æ‡•É‡§¶‡•ç‡§ß‡§ø ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç‡•§'
                : 'Your feedback will help us improve our services. May God bless you with happiness and prosperity.'
              }
            </p>
          </div>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen p-8">
      <div className="max-w-4xl mx-auto">
        {/* Header */}
        <div className="text-center mb-8">
          <div className="flex items-center justify-center mb-4">
            <MessageSquare size={40} className="text-red-800 mr-3" />
            <h1 className="text-4xl font-bold text-red-900">
              {language.code === 'hi' ? '‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§î‡§∞ ‡§∏‡•Å‡§ù‡§æ‡§µ' : 'Feedback & Suggestions'}
            </h1>
            <MessageSquare size={40} className="text-red-800 ml-3" />
          </div>
          <div className="w-32 h-1 bg-gradient-to-r from-yellow-600 to-red-800 mx-auto mb-4"></div>
          <p className="text-xl text-red-700">
            {language.code === 'hi' ? '‡§Ü‡§™‡§ï‡§æ ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§π‡§Æ‡§æ‡§∞‡•á ‡§≤‡§ø‡§è ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§π‡•à' : 'Your experience matters to us'}
          </p>
        </div>

        {/* Feedback Form */}
        <div className="bg-white rounded-2xl shadow-2xl p-8">
          <form onSubmit={handleSubmit} className="space-y-8">
            {/* Rating Section */}
            <div className="text-center">
              <h2 className="text-2xl font-bold text-red-900 mb-6">
                {language.code === 'hi' ? '‡§Ö‡§™‡§®‡§æ ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§∞‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç' : 'Rate Your Experience'}
              </h2>
              
              <div className="flex justify-center items-center space-x-4 mb-6">
                {[1, 2, 3, 4, 5].map((star) => (
                  <button
                    key={star}
                    type="button"
                    onClick={() => setRating(star)}
                    className={`group relative transition-all duration-200 ${
                      rating >= star ? 'scale-110' : 'hover:scale-105'
                    }`}
                  >
                    <div className="text-6xl mb-2">
                      {rating >= star ? 'üåü' : '‚≠ê'}
                    </div>
                    <Star 
                      size={60} 
                      className={`absolute inset-0 transition-all ${
                        rating >= star 
                          ? 'fill-yellow-400 text-yellow-400' 
                          : 'text-gray-300 group-hover:text-yellow-300'
                      }`} 
                    />
                  </button>
                ))}
              </div>

              {rating > 0 && (
                <div className="bg-yellow-50 border-2 border-yellow-200 rounded-lg p-4 inline-block">
                  <div className="text-4xl mb-2">{ratingEmojis[rating - 1]}</div>
                  <p className="text-lg font-bold text-yellow-800">
                    {getRatingLabel(rating)}
                  </p>
                </div>
              )}
            </div>

            {/* Category Selection */}
            <div>
              <h3 className="text-xl font-bold text-gray-800 mb-4">
                {language.code === 'hi' ? '‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ï‡•Ä ‡§∂‡•ç‡§∞‡•á‡§£‡•Ä ‡§ö‡•Å‡§®‡•á‡§Ç' : 'Select Feedback Category'}
              </h3>
              <div className="grid md:grid-cols-3 gap-4">
                {categories.map((cat) => (
                  <button
                    key={cat.id}
                    type="button"
                    onClick={() => setCategory(cat.id)}
                    className={`p-4 rounded-lg border-2 text-left transition-all ${
                      category === cat.id
                        ? 'border-red-500 bg-red-50'
                        : 'border-gray-200 hover:border-red-300'
                    }`}
                  >
                    <h4 className="font-medium text-gray-800">
                      {getCategoryName(cat)}
                    </h4>
                  </button>
                ))}
              </div>
            </div>

            {/* Feedback Text */}
            <div>
              <h3 className="text-xl font-bold text-gray-800 mb-4">
                {language.code === 'hi' ? '‡§Ö‡§™‡§®‡•Ä ‡§¨‡§æ‡§§ ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞ ‡§∏‡•á ‡§¨‡§§‡§æ‡§è‡§Ç' : 'Share Your Detailed Feedback'}
              </h3>
              <textarea
                value={feedbackText}
                onChange={(e) => setFeedbackText(e.target.value)}
                placeholder={
                  language.code === 'hi' 
                    ? '‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ö‡§™‡§®‡§æ ‡§Ö‡§®‡•Å‡§≠‡§µ, ‡§∏‡•Å‡§ù‡§æ‡§µ ‡§Ø‡§æ ‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§Ø‡§π‡§æ‡§Å ‡§≤‡§ø‡§ñ‡•á‡§Ç...'
                    : 'Please share your experience, suggestions, or complaints here...'
                }
                rows={6}
                className="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none resize-none"
              />
            </div>

            {/* Contact Information */}
            <div>
              <h3 className="text-xl font-bold text-gray-800 mb-4">
                {language.code === 'hi' ? '‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä (‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï)' : 'Contact Information (Optional)'}
              </h3>
              <div className="grid md:grid-cols-3 gap-6">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    {language.code === 'hi' ? '‡§®‡§æ‡§Æ' : 'Name'}
                  </label>
                  <input
                    type="text"
                    value={contactInfo.name}
                    onChange={(e) => setContactInfo({...contactInfo, name: e.target.value})}
                    className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none"
                    placeholder={language.code === 'hi' ? '‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ' : 'Your name'}
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    {language.code === 'hi' ? '‡§´‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞' : 'Phone Number'}
                  </label>
                  <input
                    type="tel"
                    value={contactInfo.phone}
                    onChange={(e) => setContactInfo({...contactInfo, phone: e.target.value})}
                    className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none"
                    placeholder={language.code === 'hi' ? '‡§Ü‡§™‡§ï‡§æ ‡§´‡•ã‡§® ‡§®‡§Ç‡§¨‡§∞' : 'Your phone number'}
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    {language.code === 'hi' ? '‡§à‡§Æ‡•á‡§≤' : 'Email'}
                  </label>
                  <input
                    type="email"
                    value={contactInfo.email}
                    onChange={(e) => setContactInfo({...contactInfo, email: e.target.value})}
                    className="w-full p-3 border-2 border-gray-300 rounded-lg focus:border-red-500 focus:outline-none"
                    placeholder={language.code === 'hi' ? '‡§Ü‡§™‡§ï‡§æ ‡§à‡§Æ‡•á‡§≤' : 'Your email'}
                  />
                </div>
              </div>
            </div>

            {/* Submit Button */}
            <div className="text-center">
              <button
                type="submit"
                disabled={rating === 0}
                className="bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white text-xl font-bold py-4 px-12 rounded-full shadow-2xl transform hover:scale-105 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none"
              >
                <div className="flex items-center space-x-3">
                  <Send size={24} />
                  <span>{language.code === 'hi' ? '‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§≠‡•á‡§ú‡•á‡§Ç' : 'Submit Feedback'}</span>
                </div>
              </button>
              
              {rating === 0 && (
                <p className="text-red-500 text-sm mt-2">
                  {language.code === 'hi' ? '‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡§π‡§≤‡•á ‡§∞‡•á‡§ü‡§ø‡§Ç‡§ó ‡§¶‡•á‡§Ç' : 'Please provide a rating first'}
                </p>
              )}
            </div>
          </form>
        </div>

        {/* Additional Information */}
        <div className="grid md:grid-cols-2 gap-8 mt-8">
          <div className="bg-blue-50 border-2 border-blue-200 rounded-xl p-6">
            <h3 className="text-xl font-bold text-blue-800 mb-4">
              {language.code === 'hi' ? '‡§π‡§Æ‡§æ‡§∞‡§æ ‡§µ‡§æ‡§¶‡§æ' : 'Our Promise'}
            </h3>
            <ul className="space-y-2 text-blue-700">
              <li className="flex items-start space-x-2">
                <span className="text-blue-600 mt-1">‚Ä¢</span>
                <span>{language.code === 'hi' ? '‡§Ü‡§™‡§ï‡•Ä ‡§™‡•ç‡§∞‡§§‡§ø‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ ‡§ó‡•Å‡§™‡•ç‡§§ ‡§∞‡§ñ‡•Ä ‡§ú‡§æ‡§è‡§ó‡•Ä' : 'Your feedback will be kept confidential'}</span>
              </li>
              <li className="flex items-start space-x-2">
                <span className="text-blue-600 mt-1">‚Ä¢</span>
                <span>{language.code === 'hi' ? '48 ‡§ò‡§Ç‡§ü‡•á ‡§Æ‡•á‡§Ç ‡§ú‡§µ‡§æ‡§¨ ‡§¶‡•á‡§®‡•á ‡§ï‡•Ä ‡§ï‡•ã‡§∂‡§ø‡§∂' : 'We try to respond within 48 hours'}</span>
              </li>
              <li className="flex items-start space-x-2">
                <span className="text-blue-600 mt-1">‚Ä¢</span>
                <span>{language.code === 'hi' ? '‡§Ü‡§™‡§ï‡•á ‡§∏‡•Å‡§ù‡§æ‡§µ‡•ã‡§Ç ‡§ï‡•ã ‡§ó‡§Ç‡§≠‡•Ä‡§∞‡§§‡§æ ‡§∏‡•á ‡§≤‡•á‡§§‡•á ‡§π‡•à‡§Ç' : 'We take your suggestions seriously'}</span>
              </li>
            </ul>
          </div>

          <div className="bg-green-50 border-2 border-green-200 rounded-xl p-6">
            <h3 className="text-xl font-bold text-green-800 mb-4">
              {language.code === 'hi' ? '‡§Ö‡§®‡•ç‡§Ø ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§Æ‡§æ‡§ß‡•ç‡§Ø‡§Æ' : 'Other Contact Methods'}
            </h3>
            <div className="space-y-3 text-green-700">
              <div className="flex items-center space-x-2">
                <span>üìß</span>
                <span>feedback@divinetemple.org</span>
              </div>
              <div className="flex items-center space-x-2">
                <span>üìû</span>
                <span>+91-123-456-7890</span>
              </div>
              <div className="flex items-center space-x-2">
                <span>üí¨</span>
                <span>WhatsApp: +91-98765-43210</span>
              </div>
              <div className="flex items-center space-x-2">
                <span>üìç</span>
                <span>
                  {language.code === 'hi' 
                    ? '‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§æ‡§≤‡§Ø, ‡§¶‡§ø‡§µ‡•ç‡§Ø ‡§Æ‡§Ç‡§¶‡§ø‡§∞ ‡§™‡§∞‡§ø‡§∏‡§∞'
                    : 'Main Office, Divine Temple Complex'
                  }
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};

export default FeedbackSection;